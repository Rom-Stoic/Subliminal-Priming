# CFS阈下启动实验程序

## 项目简介

本项目是一个基于Web的心理学实验程序，旨在研究阈下启动对"速度-准确性"权衡的影响。实验采用连续闪烁抑制（Continuous Flash Suppression, CFS）技术，在被试意识阈限以下呈现启动刺激，然后测量其对后续靶子任务表现的影响。

## 实验设计

### 实验条件
- **启动类型**: 速度启动、准确性启动、中性启动
- **呈现方式**: 阈下（CFS）、阈上（直接呈现）
- **被试内设计**: 每个被试完成所有实验条件

### 实验流程
1. **鼠标居中阶段**: 被试需将鼠标移动到屏幕中心并保持稳定
2. **注视点阶段**: 呈现500ms的注视点
3. **启动阶段**: 
   - 阈下条件：使用CFS技术呈现启动刺激1000ms
   - 阈上条件：直接呈现启动刺激1000ms
4. **靶子任务**: 在随机位置呈现靶子，记录反应时和准确性

## 技术特性

### CFS技术实现
- **蒙版频率**: 10Hz (100ms间隔)
- **刺激对比度**: 可调节蒙版和刺激的对比度
- **双眼竞争**: 红绿通道分离实现双眼竞争效果
- **精确时间控制**: 毫秒级时间精度

### 数据记录
- 反应时（毫秒）
- 点击准确性
- 启动条件
- 试次信息
- 鼠标轨迹数据

## 文件结构

```
实验程序/
├── README.md                              # 项目说明文档
├── miniEP.js                             # ExpPsyJS实验框架
├── 实验程序（阈下，vscode，html）.html      # 阈下实验HTML文件
├── 实验程序（阈下，vscode，js）.js         # 阈下实验JavaScript逻辑
├── 实验程序（阈上，vscode，html）.html      # 阈上实验HTML文件
├── 实验程序（阈上，vscode，js）.js         # 阈上实验JavaScript逻辑
├── 实验材料/                              # 实验刺激材料
│   ├── mask/                             # CFS蒙版图片
│   │   ├── smallbluenoise/               # 蓝色噪声蒙版
│   │   └── smallrednoise/                # 红色噪声蒙版
│   ├── stimulus_sub/                     # 阈下刺激图片
│   │   ├── accuracy/                     # 准确性启动图片
│   │   ├── neutral/                      # 中性启动图片
│   │   └── speed/                        # 速度启动图片
│   └── stimulus_supra/                   # 阈上刺激图片
│       ├── accuracy/                     # 准确性启动图片
│       ├── neutral/                      # 中性启动图片
│       └── speed/                        # 速度启动图片
└── 预实验（图片评分）程序/                  # 预实验程序
    ├── 预实验程序（vscode, js）.html        # 图片评分应用
    └── 实验刺激(not offered since it is too large)/  # 预实验图片素材
```

## 运行要求

### 系统要求
- 现代Web浏览器（Chrome、Firefox、Safari、Edge）
- 支持HTML5 Canvas和JavaScript ES6+
- 建议屏幕分辨率：1920×1080或更高

### 性能要求
- 稳定的刷新率（建议60Hz或更高）
- 低延迟的鼠标输入
- 足够的计算性能保证CFS蒙版流畅闪烁

## 使用方法

### 1. 启动实验

#### 阈下实验
```bash
# 在浏览器中打开
open 实验程序（阈下，vscode，html）.html
```

#### 阈上实验
```bash
# 在浏览器中打开
open 实验程序（阈上，vscode，html）.html
```

### 2. 预实验（图片评分）
```bash
# 在浏览器中打开
open 预实验（图片评分）程序/预实验程序（vscode, js）.html
```

### 3. 实验参数配置

在JavaScript文件中可以修改以下参数：

```javascript
// 时间参数
const FIXATION_DURATION_MS = 500;              // 注视点持续时间
const CFS_PRESENTATION_DURATION_MS = 1000;     // CFS呈现时间
const REQUIRED_STABLE_DURATION = 1000;         // 鼠标稳定要求时间

// CFS参数
const CFS_MASK_FLASH_RATE = 100;               // 蒙版闪烁频率
const CFS_DISPLAY_SIZE = 5;                    // CFS显示区域大小(cm)
const CFS_MASK_CONTRAST = "150%";              // 蒙版对比度
const CFS_STIMULUS_CONTRAST = "55%";           // 刺激对比度

// 实验设计参数
const NUM_MAIN_BLOCKS = 30;                    // 主实验区组数
const TRIALS_PER_BLOCK = 3;                    // 每区组试次数
```

## 数据分析

### 数据格式
实验结束后会生成CSV格式的数据文件，包含以下字段：

- `trial`: 试次编号
- `block`: 区组编号
- `primeCondition`: 启动条件（speed/accuracy/neutral）
- `targetX`, `targetY`: 靶子位置坐标
- `clickX`, `clickY`: 点击位置坐标
- `reactionTime`: 反应时（毫秒）
- `accuracy`: 准确性（距离靶子中心的像素距离）
- `timestamp`: 时间戳

### 分析建议
1. **反应时分析**: 比较不同启动条件下的反应时差异
2. **准确性分析**: 分析启动条件对点击准确性的影响
3. **速度-准确性权衡**: 探索反应时与准确性之间的关系
4. **个体差异**: 分析被试间的差异模式

## 实验参数说明

### CFS技术参数
- **双眼竞争**: 通过红绿通道分离实现
- **蒙版复杂度**: 使用高对比度噪声图案
- **抑制效果**: 启动刺激在意识阈限以下呈现
- **时间精度**: 毫秒级控制确保实验效果

### 刺激材料
- **图片数量**: 每类启动条件30张图片
- **图片格式**: BMP格式，确保色彩准确性
- **预实验验证**: 通过评分实验验证启动效果

## 注意事项

### 实验环境
1. **光照条件**: 保持稳定的室内光照
2. **屏幕设置**: 确保屏幕亮度和对比度适中
3. **座位距离**: 建议与屏幕保持60-70cm距离
4. **干扰控制**: 确保实验环境安静无干扰

### 技术注意
1. **浏览器兼容性**: 测试不同浏览器的表现
2. **性能监控**: 确保CFS蒙版流畅运行
3. **数据备份**: 及时保存实验数据
4. **网络稳定**: 确保图片加载完整

## 故障排除

### 常见问题

1. **图片加载失败**
   - 检查图片路径是否正确
   - 确认所有图片文件完整存在

2. **CFS效果不佳**
   - 调整蒙版和刺激的对比度
   - 检查显示器刷新率设置

3. **时间精度问题**
   - 关闭其他占用CPU的程序
   - 使用性能更好的设备

4. **数据丢失**
   - 每次实验结束立即下载数据
   - 建议设置自动保存机制

## 开发信息

### 技术栈
- **前端框架**: ExpPsyJS
- **样式**: Tailwind CSS
- **图片处理**: HTML5 Canvas
- **数据格式**: JSON/CSV

### 版本历史
- v1.0: 基础CFS实验程序
- v1.1: 增加预实验评分功能

## 许可证

本项目仅用于学术研究目的。使用时请注明出处并遵循相关伦理规范。

## 作者

- 开发者：25春实验心理学实验小组_Rom
- 机构：北京大学心理与认知科学学院

---

*本实验程序基于ExpPsyJS框架开发，感谢开源社区的贡献。*
